# 텔레그램과 함께한 뻘짓 (with n8n)
![](https://postfiles.pstatic.net/MjAyNTA4MDlfMjUy/MDAxNzU0NjY2ODM1ODM3.JQgELv293kaTF2wtrhIgHc3eL4SoAmF7ifQFbxYHZY0g.u2mBHj_A05febQjNkunnIekb4ctDi6xfmvg8h4KgEl0g.PNG/image.png?type=w773)

현재 n8n으로 여러 뻘짓을 해보고 있다. 요즘 친구와 대화를 할 때는 유독 텔레그램 사용량이 문득 늘어났는데 UI나 사용 경험 면에서 카카오톡보다 더 편한 부분이 많기 때문이다. 그리고 채팅 관련해서 API도 많이 열어놔서 여러가지로 많은 것을 실험해볼 수 있다는 점에서 꽤나 재미있다. 요즘은 텔레그램 톡방에서 주고받는 채팅방을 n8n에서 캐치한 후에 프로세싱하는 작업을 해보고 있다. 이를테면 gemini와 연결해서 봇과 대화를 한더던지 하는 식이다.

요즘 하고 있는 것은 친구놈의 단어를 필터링하는 것이다. 이놈의 자슥이 시도때도 없이 뭐하냐는 질문을 난사해서 답변하는 게 영 귀찮은 게 아니다. 안 그래도 별로 없는 친구기에 싫은 말은 못하겠고 친구로부터 '뭐하냐'는 뉘앙스의 채팅이 감지되면 봇이 유려하게 답변을 해주는 플로우를 구성했다. 요즘은 LLM 모델이 너무 잘 되어 있길래 처음에는 Gemini로 하여금 답변을 하게 했는데 비교적 빠른 시간 동안 이뤄지는 채팅인데, 채팅마다 필터링을 하려니까 생각보다 오래 걸려서 LLM 모델을 이용해서 답변하는 방식은 포기했다.
​
조금 더 답변 속도를 올리기 위해, 지금 시도하는 방식은 벡터를 이용해 의미적 유사도를 판단하는 방식이다. 즉, 임베딩 모델을 활용해서 채팅을 벡터로 바꾸고, 사전에 저장해 놓은 벡터 시드 데이터와 의미적으로 유사하면 필터링 하는 방식을 해보고 있다. Elasticsearch를 이용해서 이것저것 만지고 있는데 생각보다 필터링 성능이 좋지 않다. '뭐하냐', '모해', 'ㅁㅎ', 'What are you doing'처럼 의미상 똑같은 다른 표현법을 벡터화 해서 seed로 넣어놨는데 '안녕'이라는 단어와 매칭해도 유사도가 0.9 이상이 나오니 어디서 꼬인 게 틀림없다. 조금 더 만져봐야 할 듯하다....

![](https://postfiles.pstatic.net/MjAyNTA4MDlfMTY3/MDAxNzU0NjY3NjM5MzAz.f5HhJoL5B82ehyn6NyF24VN5wwhl97HNBkmbPinYLEkg.bqpKnHnLHFfwHowFq1rV2SplalLcX2uoZ17lCv93H1Yg.PNG/image.png?type=w773)

n8n을 접하면서 새로운 세계가 열린 느낌이다. 여러 툴들을 활용하며 그것들의 텍스처를 느껴보고 있는데 아직까지는 감이 잘 잡히지 않는다.